<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="./img/logo_fondo.ico">
  <link rel="stylesheet" href="css/abm.css">
  <script src="js/main.js"></script>
  <script src="js/abm.js"></script>
  <title>InTouch Â· AdministraciÃ³n de Pictogramas</title>
</head>
<body>
  <main class="admin-app">
    <header class="admin-header">
      <div class="header-content">
        <h1>ğŸ“‹ Panel de AdministraciÃ³n</h1>
        <p>Gestiona tus pictogramas de forma fÃ¡cil y rÃ¡pida</p>
      </div>
      <div class="header-actions">
        <button class="btn-primary" onclick="window.location.href='index.html'">ğŸ  Ir a la App</button>
        <button class="btn-success" onclick="abrirModal()">â• Nuevo Pictograma</button>
      </div>
    </header>

    <section class="picto-grid-container">
      <div class="grid-header">
        <h2>ğŸ¨ Mis Pictogramas</h2>
        <div class="filter-controls">
          <select id="filtroCategoria" onchange="filtrarPorCategoria()">
            <option value="">Todas las categorÃ­as</option>
          </select>
        </div>
      </div>
      <div class="picto-grid" id="pictoGrid">
        <!-- Los pictogramas se cargan dinÃ¡micamente -->
      </div>
    </section>
  </main>

  <!-- Modal para agregar/editar pictograma -->
  <div id="pictoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">â• Nuevo Pictograma</h3>
        <button class="close-btn" onclick="cerrarModal()">&times;</button>
      </div>
      <form id="pictoForm" enctype="multipart/form-data">
        <input type="hidden" id="pictoId" name="id" value="">
        
        <div class="form-group">
          <label for="texto">ğŸ“ Texto del pictograma</label>
          <input type="text" id="texto" name="texto" placeholder="Ej: Hola, Agua, Feliz..." required>
        </div>

        <div class="form-group">
          <label for="categoria_id">ğŸ·ï¸ CategorÃ­a</label>
          <select id="categoria_id" name="categoria_id" required>
            <option value="">Seleccionar categorÃ­a...</option>
          </select>
        </div>

        <div class="form-group">
          <label for="imagen">ğŸ–¼ï¸ Imagen (opcional)</label>
          <div class="file-input-wrapper">
            <input type="file" id="imagen" name="imagen" accept="image/*">
            <div class="file-input-display">
              <span id="fileName">Seleccionar archivo...</span>
              <button type="button" class="btn-file">ğŸ“ Explorar</button>
            </div>
          </div>
          <small>Si no seleccionas imagen, se generarÃ¡ automÃ¡ticamente</small>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn-secondary" onclick="cerrarModal()">Cancelar</button>
          <button type="submit" class="btn-primary">ğŸ’¾ Guardar</button>
        </div>
      </form>
    </div>
  </div>
  <script>
    // Funciones del modal
    function abrirModal(id = null) {
      const modal = document.getElementById('pictoModal');
      const title = document.getElementById('modalTitle');
      const form = document.getElementById('pictoForm');
      
      if (id) {
        title.textContent = 'âœï¸ Editar Pictograma';
        // Cargar datos del pictograma
      } else {
        title.textContent = 'â• Nuevo Pictograma';
        form.reset();
      }
      
      modal.style.display = 'flex';
    }
    
    function cerrarModal() {
      const modal = document.getElementById('pictoModal');
      modal.style.display = 'none';
    }
    
    // Cerrar modal al hacer clic fuera
    window.onclick = function(event) {
      const modal = document.getElementById('pictoModal');
      if (event.target === modal) {
        cerrarModal();
      }
    }
  </script>
</body>
</html>
