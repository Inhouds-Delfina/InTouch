<?php
session_start();
if (!isset($_SESSION['usuario_id'])) {
    header("Location: login.php");
    exit;
}
?>
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="../img/logo_fondo.ico">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/tts.css">
  <script src="../js/main.js"></script>
  <script src="../js/tts.js"></script>
  <script src="../js/session.js"></script>
  <title>InTouch - Texto a Voz</title>
</head>
<body>
  <main class="app" role="main">
    <header>
      <img src="../img/logo.png" alt="Logo InTouch" class="logo-large"/>
      <h1 class="title-large">InTouch</h1>
      <p class="subtitle">Texto a Voz Libre</p>
    </header>

    <div class="nav-section">
      <button class="btn-back" onclick="window.location.href='../index.php'" title="Volver a la App">
        <span class="btn-icon">üè†</span>
        Volver a la App
      </button>
    </div>

    <section class="tts-section">
      <div class="tts-card">
        <h2>üé§ Texto a Voz</h2>
        <p>Escrib√≠ cualquier texto y escuchalo en voz alta</p>

        <div class="tts-controls">
          <div class="control-group">
            <label for="voiceSelect">üé≠ Voz:</label>
            <select id="voiceSelect" aria-label="Seleccionar voz">
              <option>Cargando voces...</option>
            </select>
          </div>

          <div class="control-group">
            <label for="rate">‚ö° Velocidad: <span id="rateValue">1.0</span></label>
            <input id="rate" type="range" min="0.5" max="2.0" step="0.1" value="1" />
          </div>

          <div class="control-group">
            <label for="pitch">üéµ Tono: <span id="pitchValue">1.0</span></label>
            <input id="pitch" type="range" min="0.5" max="2.0" step="0.1" value="1" />
          </div>
        </div>

        <div class="text-input-area">
          <textarea
            id="freeText"
            placeholder="Escrib√≠ tu texto ac√°...&#10;&#10;Por ejemplo:&#10;Hola, ¬øc√≥mo est√°s?&#10;Me gustar√≠a comer una pizza.&#10;Gracias por tu ayuda."
            aria-label="Texto a convertir en voz"
          ></textarea>
        </div>

        <div class="tts-actions">
          <button id="speakText" class="btn-primary">
            <span class="btn-icon">üîä</span>
            Leer Texto
          </button>
          <button id="stopSpeech" class="btn-danger">
            <span class="btn-icon">‚èπÔ∏è</span>
            Detener
          </button>
        </div>

        <div class="tts-status" id="ttsStatus" style="display: none;">
          <span class="status-icon" id="ttsStatusIcon">üéµ</span>
          <span class="status-text" id="ttsStatusText">Reproduciendo...</span>
        </div>
      </div>
    </section>

    <footer>
      <p>¬© InTouch - 2025</p>
    </footer>
  </main>

</body>
</html>